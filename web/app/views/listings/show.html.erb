<div class="container mt-4">
  <div class="row">
    <div class="col-md-4">
      <% if @listing.thumbnail.attached? %>
        <%= image_tag @listing.thumbnail.variant(:thumb), width: '300', height: '300', class: 'img-thumbnail mb-3' %>
      <% end %>
      <div class="mt-3">
        <%= render partial: 'shared/action_buttons', locals: { resource: @listing, resource_type: 'listing' } %>
      </div>

      <div class="mt-3">
        <% if current_user.moderator? %>
          <% if @listing.pinned %>
            <%= button_to 'Unpin', unpin_listing_path(@listing), method: :post %>
          <% else %>
            <%= button_to 'Pin', pin_listing_path(@listing), method: :post %>
          <% end %>
        <% end %>
      </div>

    </div>
    <div class="col-md-8">
      <div id="<%= dom_id @listing %>">
        <h3 class="mb-3"><%= @listing.title %></h3>
        <p><%= @listing.description %></p>
        <p><strong>Location:</strong> <%= @listing.location %></p>
        <p><strong>Price:</strong> <%= @listing.price %></p>
        <p><strong>Views:</strong> <%= @listing.views %></p>
      </div>

      <div class="d-flex align-items-center mt-3">
        <div class="me-2">
          <%= render partial: 'shared/avatar', locals: { user: @listing.user } %>
        </div>
        <div>
          Posted by: <%= link_to @listing.user.username, user_path(@listing.user) %>
          <span class="text-muted small">- <%= @listing.created_at.strftime('%B %d, %Y') %></span>
        </div>
      </div>
    </div>
  </div>



  <div class="mt-5"><%= @listing.content %></div>

  <%= render partial: 'shared/comments_section', locals: { comments: @comments, commentable: @listing } %>


</div>
