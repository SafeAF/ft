<div class="container">
  <!-- Thumbnail -->
  <% if @article.thumbnail.attached? %>
    <%= image_tag @article.thumbnail.variant(resize_to_limit: [300, 300]) %>

  <% end %>

  <!-- Article Details -->
  <div id="<%= dom_id @article %>">
    <h3><%= @article.title %></h3>
    <p><%= @article.description %></p>
    <p>
      <strong>Location:</strong> <%= @article.location %>
    </p>
    <p>
      <strong>Views:</strong> <%= @article.views %>
    </p>
    <p>
      Posted by: <%= @article.user.username %>
    </p>
  </div>

  <hr>

  <!-- Article Content -->
  <div>
    <%= @article.content %>
  </div>

  <!-- Flag and Edit Links -->
  <div>
   
<% if @article.user == current_user || current_user.moderator? %>
  <%= link_to 'Edit', edit_article_path(@article) %> |
    <%= button_to "Destroy this article", @article, method: :delete, class: "btn btn-danger" %>
<% end %>


    <%= link_to "Back to articles", articles_path, class: "btn btn-secondary" %>

<%= form_with url: flag_article_path(@article), method: :post do %>
  <%= submit_tag "Flag this Article" %>
<% end %>

  </div>

  <hr>

  <!-- Comments Section -->
  <h2>Comments!</h2>
<div class="row mt-5">
  <div class="col">
    <%= render partial: 'comments/comment', collection: @comments %>
  </div>
</div>


  <hr>

  <!-- Add a Comment -->
  <h2>Add a Comment</h2>
  <div class="row mt-2">
    <div class="col">
      <% if user_signed_in? %>
        <%= render 'comments/form', commentable: @article %>
      <% else %>
        <p>You must be logged in to post a comment.</p>
      <% end %>
    </div>
  </div>
  
</div>


